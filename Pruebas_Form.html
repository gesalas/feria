<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="/styles.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
</head>
<body style="background-color: #02599a; padding:100px;">
    <div id="formulario" class="rounded-30 px-2 px-md-3 py-4 mb-50 shadows-sm" style="background-color: rgba(var(--bs-light-rgb), 0.8) !important;">
        <div class="form-row justify-content-center align-items-center mb-3 mx-2">
            <div class="col">
                <h3 class="d-block fs-4 text-azul fw-bold text-center text-uppercase">Inscríbete aquí</h3>
            </div>
        </div>                  
        <form id="form_me" action="https://test.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8" method="POST" method="post" novalidate aria-label="Formulario de contacto"  class="needs-validation">
            <input type="hidden" name="oid" value="00D7j0000004eQD">
            <input type="hidden" name="retURL" id="retURL" value="">
            <input type="hidden" name="debug" value="1">
            <input type="hidden" name="debugEmail" value="gesalas@javeriana.edu.co">         

                    <!--Nombres y apellidos-->
                    <div class="form-row col-12">
                        <div class="form-group col-md-6 col-sm-12">
                            <input placeholder="*Nombre(s)" id="first_name" class="form-control border-top-0 border-left-0 border-right-0 rounded-1" maxlength="40" name="first_name" type="text" required="">
                            <div class="invalid-feedback">
                                Completa este campo
                            </div>
                        </div>

                        <div class="form-group col-md-6 col-sm-12">
                            <input placeholder="*Apellidos" id="last_name" class="form-control border-top-0 border-left-0 border-right-0 rounded-1 needs-validation" maxlength="80" name="last_name" type="text" required="">
                            <div class="invalid-feedback">
                                Completa este campo
                            </div>
                        </div>
                    </div>

                    <!--Documentos de identidad-->
                    <div class="form-row col-12">
                        <div class="form-group col-5">
                            <select id="00N7j000002BI3X" name="00N7j000002BI3X" class="form-control border-top-0 border-left-0 border-right-0 rounded-1" required="">
                                <option value="">*Tipo de documento</option>                                
                                <option value="CC">Cédula Ciudadanía</option>
                                <option value="CE">Cédula Extranjería</option>
                                <option value="PA">Pasaporte</option>
                                <option value="TI">Tarjeta Identidad</option>   
                                <!-- Agregar opciones aquí -->
                            </select>
                            <div class="invalid-feedback">
                                Selecciona
                            </div>
                        </div>

                        <div class="form-group col-7">
                            <input placeholder="*Número de documento" id="00N7j000002BI3V" class="form-control border-top-0 border-left-0 border-right-0 rounded-1" maxlength="255" name="00N7j000002BI3V" type="text" required>
                        </div>
                    </div>
                    <!--Email y celular-->
                    <div class="form-row col-12">
                        <div class="form-group col-12">
                            <input placeholder="*Email" id="email" class="form-control border-top-0 border-left-0 border-right-0 rounded-1" maxlength="80" name="email" type="email" required>
                            <div class="invalid-feedback">
                                Ingresa un correo válido
                            </div>
                        </div>
                        
                    <!--Telefono-->
                        <div class="form-group col-12">
                            <input placeholder="*Teléfono celular" id="mobile" class="form-control border-top-0 border-left-0 border-right-0 rounded-1" name="mobile" type="text" minlength="8" maxlength="15" required>
                            <div class="invalid-feedback">
                                Completa este campo (mínimo 8 caracteres)
                            </div>
                        </div>
                        
                    </div>
                        
                    <!--Ubicacion-->
                    <div class="form-row col-12 ">
                        <!-- Pais -->
                        <div class="form-group col-12">
                            <select class="form-control border-top-0 border-left-0 border-right-0 rounded-1" id="00N7j000002BY1c" name="00N7j000002BY1c" type="text" required>
                                <option value="">*Pais de residencia</option>
                            </select>
                            <div class="invalid-feedback">
                                Selecciona
                            </div>
                        </div>
                    
                        <!-- Departamento -->
                        <div class="form-group col-md-6 col-sm-12" id="departamentoContainer" style="display: none;">
                            <select class="form-control border-top-0 border-left-0 border-right-0 rounded-1" id="00N7j000002BY1h" name="00N7j000002BY1h" type="text" >
                                <option value="">*Selecciona el departamento</option>
                            </select>
                            <div class="invalid-feedback">
                                Selecciona
                            </div>
                        </div>
                    
                        <!-- Ciudad -->
                        <div class="form-group col-md-6 col-sm-12" id="ciudadContainer" style="display: none;">
                            <select class="form-control border-top-0 border-left-0 border-right-0 rounded-1" id="00N7j000002BY1i" name="00N7j000002BY1i" type="text" >
                                <option value="">*Selecciona la Ciudad</option>
                            </select>
                            <div class="invalid-feedback">
                                Selecciona
                            </div>
                        </div>
                    </div>

                    <!-- Tipo de asistente-->
                    <div class="form-row col-12">
                        <div class="col-md-6 col-sm-12">
                            <span class="wpcf7-form-control-wrap">
                                <select class="form-control select validates-as-required form-select rounded-1 text-dark mb-3" name="00NO40000000sTR" id="00NO40000000sTR" required> 
                                    <option value="">*Tipo de asistente</option>
                                    <option value="Aspirante">Aspirante</option>
                                    <option value="Estudiante PUJ">Estudiante PUJ</option>                                    
                                    <option value="Padre de familia">Padre de familia y/o Acudiente</option>
                                    <option value="Visitante PUJ">Visitante PUJ</option>
                                </select>
                                <div class="invalid-feedback">
                                    Selecciona
                                </div>                                
                            </span>
                        </div>

                        <!--Nivel académico-->
                        <div class="col-md-6 col-sm-12" id="nivelAcademicoRow">
                            <span class="wpcf7-form-control-wrap">
                                <select id="nivelacademico" class="form-control select validates-as-required form-select rounded-1 text-dark mb-3"  name="nivelacademico">
                                    <option value="">*Nivel académico</option>
                                    <option value="PREG">Pregrado</option>
                                    <option value="GRAD">Posgrado</option>
                                    <option value="ECLE">Eclesiástico</option>
                                    <option value="ETDH">Técnico</option>
                                </select>                                
                            </span>
                        </div>
                    </div>

                    <!--Facultad-->
                    <div class="form-row col-12">
                        <div class="col-12">
                            <span class="wpcf7-form-control-wrap">
                                <select id="Facultad" class="form-control select validates-as-required form-select rounded-1 text-dark  mb-3" name="Facultad">
                                    <option value="">*Selecciona la facultad</option>
                                </select>                                
                            </span>
                        </div>
                    </div>

                    <!--Programa-->
                    <div class="form-row col-12" >
                        <div class="col-12">
                            <span class="wpcf7-form-control-wrap">
                                <select id="00N7j000002BI3p" class="form-control select validates-as-required form-select rounded-1 text-dark mb-3" name="00N7j000002BI3p">
                                </select>                            
                            </span>
                        </div>
                    </div>

                    <!--Periodo de Ingreso-->
                    <div class="form-row col-12" >
                        <div class="col-12 mb-3">
                            <span class="wpcf7-form-control-wrap">
                                <select  id="00N7j000002BY2L" maxlength="20" name="00N7j000002BY2L" class="form-control select validates-as-required form-select rounded-1 text-dark mb-3">
                                    <option value="">*Periodo esperado de Ingreso</option>
                                </select>
                            </span>
                        </div>
                    </div>

                    <!-- para ocultar-->
                    <div style="display: none;">
                        <div class="form-row">
                            Origen de la Solicitud:<select  id="00NO40000002ZeP" name="00NO40000002ZeP" title="Origen de la Solicitud">
                                <option value="Web to Lead">Web to Lead</option>
                                </select>

                            Fuente autorización datos personales:<select  id="00N7j000002BY26" name="00N7j000002BY26" title="Fuente autorización datos personales">
                                <option value="Landing Eventos">Landing Eventos</option>
                                </select>
                            <label for="lead_source">Origen del candidato</label><select  id="lead_source" name="lead_source">
                                <option value="Landing Pages">Landing Pages</option>
                                </select>
                                <label for="company">Compañía</label><input  id="company" maxlength="40" name="company" size="20" type="text" value="NA" />
                        </div>

                        <!--UTMS-->
                        <div class="form-row">
                            Fuente:<input  id="00N7j000002BKgW" name="00N7j000002BKgW" title="Fuente" type="text"/>
                            Subfuente:<input  id="00N7j000002BKgb" name="00N7j000002BKgb" title="Subfuente" type="text"/>
                            Medio <input  id="00NO40000001izt" name="00NO40000001izt" title="Medio" type="text"/>
                            Campaña:<input  id="00N7j000002BfkF" maxlength="255" name="00N7j000002BfkF"  type="text"/>
                        </div>
                    </div>                    

                    <!--Legales y botón de inscripción-->                    
                    <div class="form-row col-12 mb-3">
                        <div class="col-12">
                            <span class="d-block text-azul">¿Autoriza usted el tratamiento de sus datos personales de acuerdo con la <a href="https://javeriana.ingresouniversitario.com/wp-content/uploads/2023/09/autorizacion-de-privacidad.pdf" class=" text-azul fw-medium text-decoration-underline" target="_blank" download="">autorización de privacidad</a>?</span>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" id="00N7j000002BI3m" name="00N7j000002BI3m" value="1">
                                <label class="form-check-label text-azul" for="00N7j000002BI3m">Sí</label><br>                                
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="00N7j000002BI3m" id="00N7j000002BI3m" value="0">
                                <label class="form-check-label text-azul" for="autorizacion-2">No</label>
                            </div>                                                            
                        </div>
                        <div class="col-md-12" id="autorizacionErrorMessage" style="display: none;">
                            <p style="color: brown; font-size:0.8rem;">La Pontificia Universidad Javeriana requiere de su autorización para el tratamiento de sus datos personales para continuar con el presente proceso, sin la autorización legalmente no podemos darle continuidad al mismo</p>
                        </div>
                    </div>
                    <!--Botón-->
                    <div class="form-row col-12 mb-3">
                        <div class="col-12">
                            <button class="btn btn-warning w-100 py-2 text-azul fw-bold" type="submit">Inscríbete ahora</button>
                        </div>
                    </div>
                    <div id="successMsg" class="wpcf7-response-output" style="border: 2px solid green; background-color: lightgrey; padding: 10px; border-radius: 5px; display:none;">
                        Gracias por tu mensaje. Ha sido enviado.
                    </div>                     
                </div>
            </div>
        </form>
    </div>

    <!--Validaciones-->
    <script>
        // Bootstrap Example starter JavaScript for disabling form submissions if there are invalid fields
        //Validación navegador
        document.getElementById('form_me').addEventListener('submit', function(event) {
            if (!customValidation()) {
                event.preventDefault(); // Evitar envío del formulario si la validación no pasa
            }
        });

        (function() {
            'use strict';
        
            // Fetch all the forms we want to apply custom Bootstrap validation styles to
            var forms = document.getElementsByClassName('needs-validation');
            
            // Loop over them and prevent submission
            var validation = Array.prototype.filter.call(forms, function(form) {
                form.addEventListener('submit', function(event) {
                    if (form.checkValidity() === false) {
                        event.preventDefault();
                        event.stopPropagation();
                    }
                    form.classList.add('was-validated');
                }, false);
            });

            //tratamiento de datos
            var autorizacionRadios = document.querySelectorAll('input[name="00N7j000002BI3m"]');
            var submitButton = document.querySelector('button[type="submit"]');
            var errorMessage = document.getElementById('autorizacionErrorMessage');
        
            // Función para habilitar o deshabilitar el botón según la selección
            function updateSubmitButton() {
                var selectedOption = document.querySelector('input[name="00N7j000002BI3m"]:checked');
                if (selectedOption && selectedOption.value === '1') {
                    submitButton.disabled = false;
                    errorMessage.style.display = 'none';
                } else if (selectedOption && selectedOption.value === '0') {
                    errorMessage.style.display = 'block';
                    submitButton.disabled = true;
                } else {
                    submitButton.disabled = true;
                    errorMessage.style.display = 'none';
                }
            }
        
            // Evento para actualizar el botón cuando cambia la selección
            autorizacionRadios.forEach(function(radio) {
                radio.addEventListener('change', updateSubmitButton);
            });
        
            // Validar el estado inicial
            updateSubmitButton(); 
            
        })();
    </script>

    <script> 

        //validacion email
        const emailInput = document.getElementById('email');
                        
                            emailInput.addEventListener('input', () => {
                                const emailValue = emailInput.value;
                                const atIndex = emailValue.indexOf('@');
                                const dotIndex = emailValue.lastIndexOf('.');
                                
                                if (atIndex === -1 || dotIndex === -1 || dotIndex < atIndex) {
                                    emailInput.setCustomValidity('Ingresa una dirección de correo electrónico válida');
                                } else {
                                    emailInput.setCustomValidity('');
                                }
                            });

        // Validación de caracteres AZ

        document.addEventListener('DOMContentLoaded', function() {
            const nombreInput = document.getElementById('first_name');
            const apellidosInput = document.getElementById('last_name');
    
            const validarLetras = function(input) {
                input.addEventListener('keydown', function(event) {
                    const teclaPresionada = event.key;
                    const permitirCaracter = /^[A-Za-záéíóúüÁÉÍÓÚÜñÑ\s]+$/;
    
                    if (!permitirCaracter.test(teclaPresionada)) {
                        event.preventDefault();
                    }
                });
            };
    
            validarLetras(nombreInput);
            validarLetras(apellidosInput);
        });

        // Validacion de número de telefono
        document.addEventListener('DOMContentLoaded', function() {
            const mobileInput = document.getElementById('mobile');
    
            mobileInput.addEventListener('input', function() {
                // Limpiar el valor ingresado, eliminando cualquier caracter no numérico
                this.value = this.value.replace(/[^0-9]/g, '');
    
                // Verificar si tiene al menos 8 dígitos
                if (this.value.length < 8) {
                    this.setCustomValidity('El teléfono debe tener al menos 9 dígitos.');
                } else {
                    this.setCustomValidity('');
                }
            });
        });
            
    // SCRIPT UBICACION-->
    
        // Función para cargar las opciones de los desplegables desde el archivo JSON        
        var jsonUrl3 = 'https://raw.githubusercontent.com/gesalas/feria/main/ubicaciones.json';
        function cargarOpciones() {
            fetch(jsonUrl3)
                .then(response => response.json())
                .then(data => {
                    const paisSelect = document.getElementById('00N7j000002BY1c');
                    const departamentoSelect = document.getElementById('00N7j000002BY1h');
                    const ciudadSelect = document.getElementById('00N7j000002BY1i');
                    const departamentoContainer = document.getElementById('departamentoContainer');
                    const ciudadContainer = document.getElementById('ciudadContainer');

                    // Cargar opciones de país
                    for (const pais in data) {
                        const option = document.createElement('option');
                        option.value = pais;
                        option.textContent = data[pais].nombre;
                        if (pais === "COL") {
                            option.style.fontWeight = '700';                            
                        }
                        else{
                            
                        }
                        paisSelect.appendChild(option);
                    }                   
                
    
                    // Manejar cambio de selección de país
                    paisSelect.addEventListener('change', () => {
                        const paisSeleccionado = paisSelect.value;
                        const departamentoData = data[paisSeleccionado]?.departamentos;
    
                        if (departamentoData) {
                            departamentoContainer.style.display = 'block';
                            ciudadContainer.style.display = 'block';
                            ciudadSelect.required = true;
                            departamentoSelect.required = true;
    
                            // Cargar opciones de departamento
                            departamentoSelect.innerHTML = '';
                            const defaultDeptOption = document.createElement('option');
                            defaultDeptOption.value = '';
                            defaultDeptOption.textContent = '*Selecciona el departamento';
                            departamentoSelect.appendChild(defaultDeptOption);
                            for (const depto of departamentoData) {
                                const option = document.createElement('option');
                                option.value = depto.codigo;
                                option.textContent = depto.nombre;
                                departamentoSelect.appendChild(option);
                            }
    
                            // Cargar opciones de ciudad (para el departamento seleccionado)
                            const departamentoSeleccionado = departamentoSelect.value;
                            const ciudadData = departamentoData.find(depto => depto.codigo === departamentoSeleccionado)?.ciudades;
    
                            ciudadSelect.innerHTML = '';
                            const defaultCiudadOption = document.createElement('option');
                            defaultCiudadOption.value = '';
                            defaultCiudadOption.textContent = '*Primero selecciona el departamento';
                            ciudadSelect.appendChild(defaultCiudadOption);
    
                            if (ciudadData) {
                                for (const ciudad of ciudadData) {
                                    const option = document.createElement('option');
                                    option.value = ciudad.codigo;
                                    option.textContent = ciudad.nombre;
                                    ciudadSelect.appendChild(option);
                                }
                            }
                        } else {
                            departamentoContainer.style.display = 'none';
                            ciudadContainer.style.display = 'none';
                            departamentoSelect.innerHTML = '';
                            ciudadSelect.innerHTML = '';
                            ciudadSelect.required = false;
                            departamentoSelect.required = false;
                        }
                    });
    
                    // Manejar cambio de selección de departamento
                    departamentoSelect.addEventListener('change', () => {
                        const paisSeleccionado = paisSelect.value;
                        const departamentoSeleccionado = departamentoSelect.value;
                        const ciudadData = data[paisSeleccionado]?.departamentos.find(depto => depto.codigo === departamentoSeleccionado)?.ciudades;
    
                        ciudadSelect.innerHTML = '';
                        const defaultCiudadOption = document.createElement('option');
                        defaultCiudadOption.value = '';
                        defaultCiudadOption.textContent = '*Selecciona la ciudad';
                        ciudadSelect.appendChild(defaultCiudadOption);
    
                        if (ciudadData) {
                            for (const ciudad of ciudadData) {
                                const option = document.createElement('option');
                                option.value = ciudad.codigo;
                                option.textContent = ciudad.nombre;
                                ciudadSelect.appendChild(option);
                            }
                        }
                    });
                })
                .catch(error => console.error('Error al cargar el archivo JSON:', error));
        }
    
        // Llamar a la función al cargar la página
        cargarOpciones();
    
        //Script niveles académicos y programas-->

        document.addEventListener("DOMContentLoaded", function() {
                var tipoAsistenteDropdown = document.getElementById('00NO40000000sTR');
                var nivelAcademicoRow = document.getElementById('nivelAcademicoRow');
                var nivelAcademicoDropdown = document.getElementById('nivelacademico');
                var facultadDropdown = document.getElementById('Facultad');
                var programaDropdown = document.getElementById('00N7j000002BI3p');
                var periodoDropdown = document.getElementById('00N7j000002BY2L');
        
                // Ocultar desplegables al inicio
                nivelAcademicoRow.style.display = 'none';
                nivelAcademicoDropdown.style.display = 'none';
                facultadDropdown.style.display = 'none';
                programaDropdown.style.display = 'none';
                periodoDropdown.style.display = 'none';
        
                tipoAsistenteDropdown.addEventListener('change', function() {
                    if (this.value === 'Aspirante') {
                        // Mostrar desplegables
                        nivelAcademicoRow.style.display = 'block';
                        nivelAcademicoDropdown.style.display = 'block';
        
                        // Hacer desplegables obligatorios
                        nivelAcademicoDropdown.required = true;
                        facultadDropdown.required = true;
                        programaDropdown.required = true;
                        periodoDropdown.required = true;
        
                        // Resetear los campos al cambiar el tipo de asistente
                        resetFieldsOnTypeChange();
        
                        // Cargar el archivo JSON
                        var jsonUrl2 = 'https://raw.githubusercontent.com/gesalas/feria/main/programas.json';
                        fetch(jsonUrl2)
                            .then(response => response.json())
                            .then(data => {
                                // Manejar los datos del JSON
                                var programas = data;
        
                                // Evento para cambiar las facultades al seleccionar nivel académico
                                nivelAcademicoDropdown.addEventListener('change', function() {
                                    var selectedNivel = this.value;
                                    facultadDropdown.innerHTML = '<option value="">*Selecciona la facultad</option>';
                                    //programaDropdown.innerHTML = '<option value="">*Selecciona el programa</option>';
                                    if (selectedNivel !== "") {
                                        var facultades = programas[selectedNivel];
                                        Object.keys(facultades).forEach(function(facultadKey) {
                                            var facultad = facultades[facultadKey];
                                            facultadDropdown.innerHTML += '<option value="' + facultad.FacultadCodigo + '">' + facultad.FacultadCodigo + '</option>';
                                        });
                                        facultadDropdown.style.display = 'block';
                                        facultadDropdown.required = true;
                                    } else {
                                        facultadDropdown.style.display = 'none';
                                        programaDropdown.style.display = 'none';
                                        periodoDropdown.style.display = 'none';
                                        facultadDropdown.required = false;
                                        programaDropdown.required = false;
                                    }
                                });
        
                                // Evento para cambiar los programas al seleccionar facultad
                                facultadDropdown.addEventListener('change', function() {
                                    var selectedNivel = nivelAcademicoDropdown.value;
                                    var selectedFacultad = this.value;
                                    programaDropdown.innerHTML = '<option value="">*Selecciona el programa</option>';
                                    if (selectedFacultad !== "") {
                                        var programasFacultad = programas[selectedNivel][selectedFacultad].Programas;
                                        programasFacultad.forEach(function(programa) {
                                            programaDropdown.innerHTML += '<option value="' + programa.Codigo + '">' + programa.Nombre + '</option>';
                                        });
                                        programaDropdown.style.display = 'block';
                                        periodoDropdown.style.display = 'block';
                                        programaDropdown.required = true;
                                    } else {
                                        programaDropdown.style.display = 'none';
                                        periodoDropdown.style.display = 'none';
                                        programaDropdown.required = false;
                                    }
                                });
                            })
                            .catch(error => console.error('Error cargando el archivo JSON:', error));
                            // Resetear los campos al cambiar el tipo de asistente
                            resetFieldsOnTypeChange();
        
                        // Cargar el archivo JSON de periodos
                        var jsonUrl = 'https://raw.githubusercontent.com/gesalas/feria/main/periodos.json';
                        fetch(jsonUrl)
                            .then(response => response.json())
                            .then(periodosData => {
                                // Evento para cambiar los periodos al seleccionar nivel académico
                                nivelAcademicoDropdown.addEventListener('change', function() {
                                    var selectedNivel = this.value;
                                    periodoDropdown.innerHTML = '<option value="">*Periodo esperado de Ingreso</option>';
        
                                    if (selectedNivel !== "") {
                                        var periodos = periodosData[selectedNivel];
                                        Object.keys(periodos).forEach(function(periodoKey) {
                                            var periodo = periodos[periodoKey];
                                            periodoDropdown.innerHTML += '<option value="' + periodo + '">' + periodoKey + '</option>';
                                        });
                                    } else {
                                        periodoDropdown.style.display = 'none';
                                        periodoDropdown.required = false;
                                    }
                                });
                            })
                            .catch(error => console.error('Error cargando el archivo JSON de periodos:', error));
                            // Resetear los campos al cambiar el tipo de asistente
                            resetFieldsOnTypeChange();
                    // Opcione estudiante
                    }else if (this.value === 'Estudiante PUJ') {
                        // Mostrar desplegables
                        nivelAcademicoRow.style.display = 'block';
                        nivelAcademicoDropdown.style.display = 'block';
                        periodoDropdown.style.display = 'none';
        
                        // Hacer desplegables obligatorios
                        nivelAcademicoDropdown.required = true;
                        facultadDropdown.required = true;
                        programaDropdown.required = true;
                        periodoDropdown.required = false;
        
                        // Resetear los campos al cambiar el tipo de asistente
                        resetFieldsOnTypeChange();
        
                        // Cargar el archivo JSON
                        var jsonUrl2 = 'https://raw.githubusercontent.com/gesalas/feria/main/programas.json';
                        fetch(jsonUrl2)
                            .then(response => response.json())
                            .then(data => {
                                // Manejar los datos del JSON
                                var programas = data;
        
                                // Evento para cambiar las facultades al seleccionar nivel académico
                                nivelAcademicoDropdown.addEventListener('change', function() {
                                    var selectedNivel = this.value;
                                    facultadDropdown.innerHTML = '<option value="">*Selecciona la facultad</option>';
                                    //programaDropdown.innerHTML = '<option value="">*Selecciona el programa</option>';
                                    if (selectedNivel !== "") {
                                        var facultades = programas[selectedNivel];
                                        Object.keys(facultades).forEach(function(facultadKey) {
                                            var facultad = facultades[facultadKey];
                                            facultadDropdown.innerHTML += '<option value="' + facultad.FacultadCodigo + '">' + facultad.FacultadCodigo + '</option>';
                                        });
                                        facultadDropdown.style.display = 'block';
                                        facultadDropdown.required = true;
                                        periodoDropdown.style.display = 'none';
                                    } else {
                                        facultadDropdown.style.display = 'none';
                                        programaDropdown.style.display = 'none';
                                        periodoDropdown.style.display = 'none';
                                        facultadDropdown.required = false;
                                        programaDropdown.required = false;
                                    }
                                });
        
                                // Evento para cambiar los programas al seleccionar facultad
                                facultadDropdown.addEventListener('change', function() {
                                    var selectedNivel = nivelAcademicoDropdown.value;
                                    var selectedFacultad = this.value;
                                    programaDropdown.innerHTML = '<option value="">*Selecciona el programa</option>';
                                    if (selectedFacultad !== "") {
                                        var programasFacultad = programas[selectedNivel][selectedFacultad].Programas;                                        
                                        programasFacultad.forEach(function(programa) {
                                            // Verifica si el nombre del programa no es "No sé qué estudiar"
                                            if (programa.Nombre !== "No sé qué estudiar") {
                                            programaDropdown.innerHTML += '<option value="' + programa.Codigo + '">' + programa.Nombre + '</option>';
                                            }
                                        });
                                        programaDropdown.style.display = 'block';
                                        periodoDropdown.style.display = 'none';
                                        programaDropdown.required = true;
                                    } else {
                                        programaDropdown.style.display = 'none';
                                        periodoDropdown.style.display = 'none';
                                        programaDropdown.required = false;
                                    }
                                });
                                
                            })
                            
                            .catch(error => console.error('Error cargando el archivo JSON:', error));

                            resetFieldsOnTypeChange();
        
                    }else {
                        // Ocultar desplegables
                        nivelAcademicoRow.style.display = 'none';
                        nivelAcademicoDropdown.style.display = 'none';
                        //ocultar programa
                        programaDropdown.style.display = 'none';
                        //
                        facultadDropdown.style.display = 'none';
                        periodoDropdown.style.display = 'none';
        
                        // Desactivar obligatoriedad
                        nivelAcademicoDropdown.required = false;
                        facultadDropdown.required = false;
                        programaDropdown.required = false;
                        periodoDropdown.required = false;
        
                        //Programa por definir si no es Aspirante
                        programaDropdown.innerHTML = '<option value="NOAP">NOAP</option>';
                        
                    }
                });
                // Resetear los campos al cambiar el tipo de asistente
                resetFieldsOnTypeChange();
        
                // Función para resetear los campos al cambiar el tipo de asistente
                function resetFieldsOnTypeChange() {
                    nivelAcademicoDropdown.value = '';
                    facultadDropdown.value = '';
                    programaDropdown.value = '';
                    periodoDropdown.value = '';
                }
            });   
        
        // UTMS IMPORTANTE
        function getParameterByName(name, url) {
            if (!url) url = window.location.href;
            name = name.replace(/[\[\]]/g, "\\$&");
            var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
                results = regex.exec(url);
            if (!results) return null;
            if (!results[2]) return '';
            return decodeURIComponent(results[2].replace(/\+/g, " "));
        }
    
        document.addEventListener("DOMContentLoaded", function() {
            // Obtener los valores de las UTM de la URL
            var utmSource = getParameterByName('utm_source');
            var utmSubsource = getParameterByName('utm_subsource');
            var utmMedium = getParameterByName('utm_medium');
            var utmCampaign = getParameterByName('utm_campaign');
    
            // Asignar valores a los campos
            document.getElementById('00N7j000002BKgW').value = utmSource || '';
            document.getElementById('00N7j000002BKgb').value = utmSubsource || '';
            document.getElementById('00NO40000001izt').value = utmMedium || '';
            document.getElementById('00N7j000002BfkF').value = utmCampaign || '';
        });
           
        
        

    </script>
<!--http://127.0.0.1:3000/Form.html?utm_source=Comercial&utm_subsource=Invitación&utm_medium=Correo&utm_campaign=Liferay-->
<!-- Programa por confirmar: NOAP -->
        
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
</body>
</html>
